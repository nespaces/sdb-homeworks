 # Домашнее задание к занятию «Репликация и масштабирование. Часть 2» - `Коробов Евгений`

### Задание 1
Опишите основные преимущества использования масштабирования методами:

1.активный master-сервер и пассивный репликационный slave-сервер;
2.master-сервер и несколько slave-серверов;
3.активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
4.SAN-кластер.
### Ответ
1. Активный master-сервер и пассивный репликационный slave-сервер: метод обеспечивает высокую отказоустойчивость, так как при отказе главного сервера система продолжает работать за счет резервного сервера, который содержит копию данных, но не осуществляет обработку запросов. Кроме того, этот метод позволяет повысить производительность, так как главный сервер осуществляет работу с данными, а резервный - только их копирование.

2. Master-сервер и несколько slave-серверов: метод обеспечивает более высокую производительность и расширяемость по сравнению с предыдущим методом. Это позволяет более гибко настраивать систему и управлять ею, используя несколько серверов для обработки одновременных запросов. Однако, также требует больших затрат на ресурсы.

3. Активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD): метод позволяет представлять несколько физических дисков на одном сервере как единый логический блочный устройство. DRBD осуществляет синхронизацию данных между узлами кластера в режиме реального времени, что обеспечивает отказоустойчивость и сверхбыстрое восстановление в случае сбоя или отказа сервера.

4. SAN-кластер: реализуется подключением серверов к разделенным хранилищам данных (Storage Area Network - SAN), где находятся все данные и ресурсы системы. Это позволяет расширять функциональность кластера, повышать его отказоустойчивость и улучшать производительность. Однако, данный метод является наиболее дорогостоящим и сложно настраиваемым из перечисленных выше.
## Задание 2. Отправка и получение сообщений
Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:

пользователи,
книги,
магазины (столбцы произвольно).
Опишите принципы построения системы и их разграничение или разбивку между базами данных.
Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.
### Ответ
При проектировании системы горизонтального и вертикального шаринга базы данных следует учитывать следующие принципы:
1. Разбить таблицы на группы: пользовательская информация, информация о книгах, информация о магазинах.
2. Определить ключи: каждая таблица должна иметь первичный ключ, который обеспечит уникальность записей. Также необходимо определить внешние ключи для связи таблиц между собой.
3. Определить критерии для горизонтального и вертикального шаринга. Например, горизонтальный шаринг пользователей может быть выполнен на основе их географического местоположения или другой характеристики. Вертикальный шаринг таблицы книг может быть выполнен на основе разделения её столбцов на две или более группы.
4. Определить, как будут работать серверы. Необходимо рассмотреть следующие режимы работы: чтение-только, запись-только, чтение/запись.
5. Разработать схему разбиения таблиц по серверам: определить, какие таблицы будут локализованы на отдельных серверах, какие - вместе.
Принципы построения системы баз данных будут зависеть от целей и требований приложения.
Создание отдельных таблиц для каждой сущности, то есть для таблиц "Пользователи", "Книги" и "Магазины".
Использование уникальных идентификаторов для каждой сущности в таблице. Например, у каждого пользователя будет свой уникальный ID, который будет использоваться для связывания этого пользователя с другими таблицами.
Создание связей между таблицами. Например, каждая книга может быть связана с магазином, где она продается, а также со списком пользователей, которые ее прочитали или хотят прочитать.
Обеспечение целостности данных путем использования ограничений на запись, чтение и изменение данных.
Разделение баз данных, если это необходимо для обеспечения безопасности данных и быстродействия приложения. Например, база данных пользователей может быть разделена на две части: одна для хранения личных данных пользователей, а другая для хранения истории их заказов.
Серверы присутствуют в трех режимах: чтение-только (Read-Only), запись-только (Write-Only) и чтение/запись.

Преимущества горизонтального шаринга:
- Увеличенная масштабируемость базы данных, так как данные могут быть легко распределены на несколько серверов.
- Улучшенная производительность базы данных, так как запросы могут быть обработаны параллельно на нескольких серверах.
Преимущества вертикального шаринга:
- Уменьшение количества данных, хранимых в каждой таблице, что позволяет оптимизировать запросы.
- Лучшая защита данных, так как данные могут быть разделены на разные серверы с различными уровнями доступа.

Блок схема: 

![3](https://github.com/nespaces/sdb-homeworks/blob/main/img/4.png)

Разбивка по серверам:

При проектировании горизонтального шардинга базы данных таблицы разбиваются на группы записей, которые сохраняются на разных серверах. При этом каждый сервер работает независимо от других и обрабатывает только часть данных. Таким образом, запросы к базе данных могут распределяться между несколькими серверами, что позволяет снизить нагрузку на каждый из них и повысить производительность системы в целом.

При проектировании вертикального шардинга базы данных таблицы разбиваются на столбцы, которые сохраняются на разных серверах. При этом каждый сервер содержит только часть данных из каждой таблицы, и запросы к базе данных могут распределяться между серверами в зависимости от запрашиваемых столбцов. Таким образом, каждый сервер может обрабатывать только ту часть данных, которая ему необходима, что позволяет снизить нагрузку на каждый из них и повысить производительность системы в целом.

Режимы работы серверов:
Каждый сервер работает в режимах чтения и записи, чтобы обеспечить операции на запись и чтение данных. Однако для повышения производительности можно использовать режимы только для чтения и только для записи в зависимости от объема и частоты операций на запись/чтение данных.
